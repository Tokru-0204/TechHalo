{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NavigationEnd } from '@angular/router';\nimport { ChatMessage } from '../../common/ChatMessage';\nimport { Notification } from '../../common/Notification';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cart.service\";\nimport * as i2 from \"../../services/promotions.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../../services/session.service\";\nimport * as i6 from \"../../services/order.service\";\nimport * as i7 from \"../../services/province.service\";\nimport * as i8 from \"../../services/web-socket.service\";\nimport * as i9 from \"../../services/notification.service\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"@angular/common\";\nimport * as i12 from \"ngx-paypal\";\nimport * as i13 from \"../../pipes/currency-vietnam.pipe\";\nfunction CheckoutComponent_option_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r4.code);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r4.name);\n  }\n}\nfunction CheckoutComponent_option_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r5.code);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r5.name);\n  }\n}\nfunction CheckoutComponent_option_73_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r6.code);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r6.name);\n  }\n}\nfunction CheckoutComponent_tr_106_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 31);\n    i0.ɵɵelementStart(2, \"a\", 39);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Danh M\\u1EE5c: \");\n    i0.ɵɵelementStart(6, \"strong\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 31);\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"currencyVietnam\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", item_r7.product.name, \" \\u00D7 \", item_r7.quantity, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r7.product.category.categoryName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 4, item_r7.price));\n  }\n}\nconst _c0 = function () {\n  return [\"/home\"];\n};\nconst _c1 = function () {\n  return [\"/all-product\"];\n};\nconst _c2 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nexport let CheckoutComponent = /*#__PURE__*/(() => {\n  class CheckoutComponent {\n    constructor(cartService, promotionService, toastr, router, sessionService, orderService, location, webSocketService, notificationService) {\n      this.cartService = cartService;\n      this.promotionService = promotionService;\n      this.toastr = toastr;\n      this.router = router;\n      this.sessionService = sessionService;\n      this.orderService = orderService;\n      this.location = location;\n      this.webSocketService = webSocketService;\n      this.notificationService = notificationService;\n      this.usedPromotionIds = []; // Mã giảm giá cho sản phẩm\n      this.sharedPromotionIds = []; // Mã giảm giá dùng chung cho giỏ hàng\n      this.paymentMethod = 'COD'; // Mặc định là thanh toán khi nhận hàng (COD)\n      this.postForm = new FormGroup({\n        'phone': new FormControl(null, [Validators.required, Validators.pattern('(0)[0-9]{9}')]),\n        'province': new FormControl(0, [Validators.required, Validators.min(1)]),\n        'district': new FormControl(0, [Validators.required, Validators.min(1)]),\n        'ward': new FormControl(0, [Validators.required, Validators.min(1)]),\n        'number': new FormControl('', Validators.required)\n      });\n    }\n    ngOnInit() {\n      // Lấy danh sách ID mã giảm giá dùng chung từ sessionStorage\n      const storedSharedPromotionIds = sessionStorage.getItem('sharedPromotionIds');\n      this.sharedPromotionIds = storedSharedPromotionIds ? JSON.parse(storedSharedPromotionIds) : [];\n      // Retrieve values from session storage and ensure they are valid JSON or set to 0 if undefined\n      const storedAmount = sessionStorage.getItem('checkoutAmount');\n      const storedDiscount = sessionStorage.getItem('checkoutDiscount');\n      const storedDiscountCart = sessionStorage.getItem('checkoutDiscountCart');\n      const storedAmountReal = sessionStorage.getItem('checkoutAmountReal');\n      // Parse only if the value is not null or undefined, else default to 0\n      this.amount = storedAmount && storedAmount !== \"undefined\" ? JSON.parse(storedAmount) : 0;\n      this.discount = storedDiscount && storedDiscount !== \"undefined\" ? JSON.parse(storedDiscount) : 0;\n      this.discountCart = storedDiscountCart && storedDiscountCart !== \"undefined\" ? JSON.parse(storedDiscountCart) : 0;\n      this.amountReal = storedAmountReal && storedAmountReal !== \"undefined\" ? JSON.parse(storedAmountReal) : 0;\n      this.checkOutPaypal();\n      this.webSocketService.openWebSocket();\n      this.router.events.subscribe(evt => {\n        if (!(evt instanceof NavigationEnd)) {\n          return;\n        }\n        window.scrollTo(0, 0);\n      });\n      this.amountPaypal = 0;\n      this.getAllItem();\n      this.getProvinces();\n      console.log('fdfsfdsf', this.usedPromotionIds);\n    }\n    getAllItem() {\n      let email = this.sessionService.getUser();\n      this.cartService.getCart(email).subscribe(data => {\n        this.cart = data;\n        // Thiết lập lại giá trị cho form\n        this.postForm = new FormGroup({\n          'phone': new FormControl(this.cart.phone, [Validators.required, Validators.pattern('(0)[0-9]{9}')]),\n          'province': new FormControl(0, [Validators.required, Validators.min(1)]),\n          'district': new FormControl(0, [Validators.required, Validators.min(1)]),\n          'ward': new FormControl(0, [Validators.required, Validators.min(1)]),\n          'number': new FormControl('', Validators.required)\n        });\n        this.cartService.getAllDetail(this.cart.cartId).subscribe(data => {\n          this.cartDetails = data;\n          // Duyệt qua từng cartDetail để kiểm tra và thêm promotionCodeId\n          this.cartDetails.forEach(cartDetail => {\n            var _a;\n            if ((_a = cartDetail.promotionCode) === null || _a === void 0 ? void 0 : _a.promotionCodeId) {\n              this.usedPromotionIds.push(cartDetail.promotionCode.promotionCodeId);\n            }\n          });\n          console.log('usedPromotionIdstâtta', this.usedPromotionIds);\n          this.usedPromotionIds.push(...this.sharedPromotionIds);\n          console.log('usedPromotionIdstâtta', this.usedPromotionIds);\n          this.cartService.setLength(this.cartDetails.length);\n          this.amountPaypal = this.amount / 22727.5; // Chuyển đổi sang USD\n        });\n      });\n    }\n    removeUsedPromotions() {\n      const email = this.sessionService.getUser(); // Lấy email từ session\n      const promotionCodeIds = this.usedPromotionIds; // Danh sách mã giảm giá đã dùng\n      this.promotionService.removeUsedPromotions(email, promotionCodeIds).subscribe(() => {\n        console.log('Mã giảm giá đã được xóa và cập nhật thành công.');\n        // Làm sạch danh sách usedPromotionIds\n        this.usedPromotionIds = [];\n        sessionStorage.setItem('usedPromotionIds', JSON.stringify(this.usedPromotionIds));\n      }, error => {\n        console.error('Lỗi khi xóa mã giảm giá:', error);\n      });\n    }\n    checkOut() {\n      if (this.postForm.valid) {\n        Swal.fire({\n          title: 'Bạn có muốn đặt đơn hàng này?',\n          icon: 'question',\n          showCancelButton: true,\n          confirmButtonColor: '#3085d6',\n          cancelButtonColor: '#d33',\n          cancelButtonText: 'Không',\n          confirmButtonText: 'Đặt'\n        }).then(result => {\n          if (result.isConfirmed) {\n            // Proceed only if confirmed\n            let email = this.sessionService.getUser();\n            this.cartService.getCart(email).subscribe(data => {\n              this.cart = data;\n              this.cart.discountCart = this.discountCart;\n              this.cart.address = `${this.postForm.value.number}, ${this.ward.name}, ${this.district.name}, ${this.province.name}`;\n              this.cart.phone = this.postForm.value.phone;\n              this.cartService.updateCart(email, this.cart).subscribe(data => {\n                this.cart = data;\n                if (this.paymentMethod === 'PayPal') {\n                  this.orderService.postcheckoutcardpayment(email, this.cart).subscribe(data => {\n                    this.removeUsedPromotions();\n                    let order = data;\n                    this.sendMessage(order.ordersId);\n                    Swal.fire('Thành công!', 'Chúc mừng bạn đã đặt hàng thành công.', 'success');\n                    this.router.navigate(['/cart']);\n                  }, error => {\n                    this.toastr.error('Lỗi server', 'Hệ thống');\n                  });\n                } else {\n                  // Phương thức thanh toán khác (COD hoặc các phương thức khác)\n                  this.orderService.postcheckout(email, this.cart).subscribe(data => {\n                    this.removeUsedPromotions();\n                    let order = data;\n                    this.sendMessage(order.ordersId);\n                    Swal.fire('Thành công!', 'Chúc mừng bạn đã đặt hàng thành công.', 'success');\n                    this.router.navigate(['/cart']);\n                  }, error => {\n                    this.toastr.error('Lỗi server', 'Hệ thống');\n                  });\n                }\n              }, error => {\n                this.toastr.error('Lỗi server', 'Hệ thống');\n              });\n            }, error => {\n              this.toastr.error('Lỗi server', 'Hệ thống');\n            });\n          } else {\n            // If not confirmed, simply return and do nothing\n            return;\n          }\n        });\n      } else {\n        this.toastr.error('Hãy nhập đầy đủ thông tin', 'Hệ thống');\n      }\n    }\n    sendMessage(id) {\n      let chatMessage = new ChatMessage(this.cart.user.name, ' đã đặt một đơn hàng');\n      this.notificationService.post(new Notification(0, this.cart.user.name + ' đã đặt một đơn hàng (' + id + ')')).subscribe(data => {\n        this.webSocketService.sendMessage(chatMessage);\n      });\n    }\n    getProvinces() {\n      this.location.getAllProvinces().subscribe(data => {\n        this.provinces = data;\n      });\n    }\n    getDistricts() {\n      this.location.getDistricts(this.provinceCode).subscribe(data => {\n        this.province = data;\n        this.districts = this.province.districts;\n      });\n    }\n    getWards() {\n      this.location.getWards(this.districtCode).subscribe(data => {\n        this.district = data;\n        this.wards = this.district.wards;\n      });\n    }\n    getWard() {\n      this.location.getWard(this.wardCode).subscribe(data => {\n        this.ward = data;\n      });\n    }\n    setProvinceCode(code) {\n      this.provinceCode = code.value;\n      this.getDistricts();\n    }\n    setDistrictCode(code) {\n      this.districtCode = code.value;\n      this.getWards();\n    }\n    setWardCode(code) {\n      this.wardCode = code.value;\n      this.getWard();\n    }\n    checkOutPaypal() {\n      this.payPalConfig = {\n        currency: 'USD',\n        clientId: 'AWFYMsUsLPYXOgGXi9CNLUkO3DWKVXYuDNDce22UsyzvpA47wEMlGFhwXB1Wv2fZ9Q-iUdDc5l13E8Yl',\n        createOrderOnClient: data => ({\n          intent: 'CAPTURE',\n          purchase_units: [{\n            amount: {\n              currency_code: 'USD',\n              value: String(this.amountPaypal.toFixed(2))\n            }\n          }]\n        }),\n        advanced: {\n          commit: 'true'\n        },\n        style: {\n          label: 'paypal',\n          layout: 'vertical',\n          color: 'blue',\n          size: 'small',\n          shape: 'rect'\n        },\n        onApprove: (data, actions) => {\n          console.log('onApprove - transaction was approved, but not authorized', data, actions);\n          actions.order.get().then(details => {\n            console.log('onApprove - you can get full order details inside onApprove: ', details);\n          });\n        },\n        onClientAuthorization: data => {\n          this.paymentMethod = 'PayPal';\n          console.log('onClientAuthorization - you should probably inform your server about completed transaction at this point', data);\n          this.checkOut();\n        },\n        onCancel: (data, actions) => {\n          console.log('OnCancel', data, actions);\n        },\n        onError: err => {\n          console.log('OnError', err);\n        },\n        onClick: (data, actions) => {\n          console.log('onClick', data, actions);\n        }\n      };\n    }\n  }\n  CheckoutComponent.ɵfac = function CheckoutComponent_Factory(t) {\n    return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.PromotionCodeService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.SessionService), i0.ɵɵdirectiveInject(i6.OrderService), i0.ɵɵdirectiveInject(i7.ProvinceService), i0.ɵɵdirectiveInject(i8.WebSocketService), i0.ɵɵdirectiveInject(i9.NotificationService));\n  };\n  CheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CheckoutComponent,\n    selectors: [[\"app-checkout\"]],\n    decls: 132,\n    vars: 35,\n    consts: [[1, \"ps-page--simple\"], [1, \"ps-breadcrumb\"], [1, \"container\"], [1, \"breadcrumb\"], [3, \"routerLink\"], [1, \"ps-checkout\", \"ps-section--shopping\"], [1, \"ps-section__header\"], [1, \"ps-section__content\"], [1, \"ps-form--checkout\", 3, \"formGroup\"], [1, \"row\"], [1, \"col-xl-7\", \"col-lg-8\", \"col-md-12\", \"col-sm-12\"], [1, \"ps-form__billing-info\"], [1, \"ps-form__heading\"], [1, \"form-group\"], [1, \"form-group__content\"], [\"type\", \"text\", \"readonly\", \"\", \"placeholder\", \"H\\u1ECD v\\u00E0 t\\u00EAn\", 1, \"form-control\", 3, \"value\"], [\"type\", \"text\", \"placeholder\", \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\", \"formControlName\", \"phone\", 1, \"form-control\", 3, \"ngClass\"], [1, \"invalid-feedback\"], [\"id\", \"province\", \"formControlName\", \"province\", 1, \"product-short-select\", \"custom-select\", \"form-control\", 2, \"font-size\", \"14px\", 3, \"ngClass\", \"change\"], [\"value\", \"0\", \"selected\", \"\", \"disabled\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"district\", \"formControlName\", \"district\", 1, \"product-short-select\", \"custom-select\", \"form-control\", 2, \"font-size\", \"14px\", 3, \"ngClass\", \"change\"], [\"id\", \"ward\", \"formControlName\", \"ward\", 1, \"product-short-select\", \"custom-select\", \"form-control\", 2, \"font-size\", \"14px\", 3, \"ngClass\", \"change\"], [\"type\", \"text\", \"formControlName\", \"number\", \"placeholder\", \"S\\u1ED1 nh\\u00E0\", 1, \"form-control\", 3, \"ngClass\"], [1, \"mt-40\"], [\"rows\", \"7\", \"placeholder\", \"Ghi ch\\u00FA v\\u1EC1 \\u0111\\u01A1n h\\u00E0ng c\\u1EE7a b\\u1EA1n\", 1, \"form-control\"], [1, \"col-xl-5\", \"col-lg-4\", \"col-md-12\", \"col-sm-12\"], [1, \"ps-form__total\"], [1, \"content\"], [1, \"ps-block__content\"], [1, \"table\", \"ps-block__products\"], [1, \"text-start\"], [4, \"ngFor\", \"ngForOf\"], [1, \"ps-block__title\"], [2, \"font-size\", \"25px\", \"color\", \"red\"], [2, \"text-align\", \"center\"], [\"href\", \"javascript:void(0);\", 1, \"ps-btn\", \"ps-btn--fullwidth\", 3, \"click\"], [3, \"config\"], [3, \"value\"], [\"href\", \"javascript:void(0);\"]],\n    template: function CheckoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"ul\", 3);\n        i0.ɵɵelementStart(4, \"li\");\n        i0.ɵɵelementStart(5, \"a\", 4);\n        i0.ɵɵtext(6, \"Trang ch\\u1EE7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"li\");\n        i0.ɵɵelementStart(8, \"a\", 4);\n        i0.ɵɵtext(9, \"C\\u1EEDa h\\u00E0ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"li\");\n        i0.ɵɵtext(11, \"Thanh To\\u00E1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 5);\n        i0.ɵɵelementStart(13, \"div\", 2);\n        i0.ɵɵelementStart(14, \"div\", 6);\n        i0.ɵɵelementStart(15, \"h1\");\n        i0.ɵɵtext(16, \"Thanh To\\u00E1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 7);\n        i0.ɵɵelementStart(18, \"form\", 8);\n        i0.ɵɵelementStart(19, \"div\", 9);\n        i0.ɵɵelementStart(20, \"div\", 10);\n        i0.ɵɵelementStart(21, \"div\", 11);\n        i0.ɵɵelementStart(22, \"h3\", 12);\n        i0.ɵɵtext(23, \"Th\\u00F4ng tin nh\\u1EADn h\\u00E0ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 13);\n        i0.ɵɵelementStart(25, \"label\");\n        i0.ɵɵtext(26, \"H\\u1ECD v\\u00E0 t\\u00EAn\");\n        i0.ɵɵelementStart(27, \"sup\");\n        i0.ɵɵtext(28, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 14);\n        i0.ɵɵelement(30, \"input\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 13);\n        i0.ɵɵelementStart(32, \"label\");\n        i0.ɵɵtext(33, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\");\n        i0.ɵɵelementStart(34, \"sup\");\n        i0.ɵɵtext(35, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 14);\n        i0.ɵɵelement(37, \"input\", 16);\n        i0.ɵɵelementStart(38, \"small\", 17);\n        i0.ɵɵtext(39, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i kh\\u00F4ng h\\u1EE3p l\\u1EC7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"div\", 13);\n        i0.ɵɵelementStart(41, \"label\");\n        i0.ɵɵtext(42, \"Ch\\u1ECDn t\\u1EC9nh th\\u00E0nh\");\n        i0.ɵɵelementStart(43, \"sup\");\n        i0.ɵɵtext(44, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"div\", 14);\n        i0.ɵɵelementStart(46, \"select\", 18);\n        i0.ɵɵlistener(\"change\", function CheckoutComponent_Template_select_change_46_listener($event) {\n          return ctx.setProvinceCode($event.target);\n        });\n        i0.ɵɵelementStart(47, \"option\", 19);\n        i0.ɵɵtext(48, \"Ch\\u1ECDn t\\u1EC9nh th\\u00E0nh\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(49, CheckoutComponent_option_49_Template, 2, 2, \"option\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"small\", 17);\n        i0.ɵɵtext(51, \"H\\u00E3y ch\\u1ECDn t\\u1EC9nh th\\u00E0nh c\\u1EE7a b\\u1EA1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"div\", 13);\n        i0.ɵɵelementStart(53, \"label\");\n        i0.ɵɵtext(54, \"Ch\\u1ECDn huy\\u1EC7n/th\\u00E0nh ph\\u1ED1 \");\n        i0.ɵɵelementStart(55, \"sup\");\n        i0.ɵɵtext(56, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"div\", 14);\n        i0.ɵɵelementStart(58, \"select\", 21);\n        i0.ɵɵlistener(\"change\", function CheckoutComponent_Template_select_change_58_listener($event) {\n          return ctx.setDistrictCode($event.target);\n        });\n        i0.ɵɵelementStart(59, \"option\", 19);\n        i0.ɵɵtext(60, \"Ch\\u1ECDn huy\\u1EC7n/th\\u00E0nh ph\\u1ED1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(61, CheckoutComponent_option_61_Template, 2, 2, \"option\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"small\", 17);\n        i0.ɵɵtext(63, \"H\\u00E3y ch\\u1ECDn huy\\u1EC7n/th\\u00E0nh ph\\u1ED1 c\\u1EE7a b\\u1EA1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"div\", 13);\n        i0.ɵɵelementStart(65, \"label\");\n        i0.ɵɵtext(66, \"Ch\\u1ECDn ph\\u01B0\\u1EDDng/x\\u00E3\");\n        i0.ɵɵelementStart(67, \"sup\");\n        i0.ɵɵtext(68, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(69, \"div\", 14);\n        i0.ɵɵelementStart(70, \"select\", 22);\n        i0.ɵɵlistener(\"change\", function CheckoutComponent_Template_select_change_70_listener($event) {\n          return ctx.setWardCode($event.target);\n        });\n        i0.ɵɵelementStart(71, \"option\", 19);\n        i0.ɵɵtext(72, \"Ch\\u1ECDn ph\\u01B0\\u1EDDng/x\\u00E3\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(73, CheckoutComponent_option_73_Template, 2, 2, \"option\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(74, \"small\", 17);\n        i0.ɵɵtext(75, \"H\\u00E3y ch\\u1ECDn ph\\u01B0\\u1EDDng/x\\u00E3 c\\u1EE7a b\\u1EA1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(76, \"div\", 13);\n        i0.ɵɵelementStart(77, \"label\");\n        i0.ɵɵtext(78, \"S\\u1ED1 nh\\u00E0\");\n        i0.ɵɵelementStart(79, \"sup\");\n        i0.ɵɵtext(80, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(81, \"div\", 14);\n        i0.ɵɵelement(82, \"input\", 23);\n        i0.ɵɵelementStart(83, \"small\", 17);\n        i0.ɵɵtext(84, \"H\\u00E3y nh\\u1EADp s\\u1ED1 nh\\u00E0 c\\u1EE7a b\\u1EA1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(85, \"h3\", 24);\n        i0.ɵɵtext(86, \" Th\\u00F4ng tin b\\u1ED5 sung\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(87, \"div\", 13);\n        i0.ɵɵelementStart(88, \"label\");\n        i0.ɵɵtext(89, \"Ghi ch\\u00FA \\u0111\\u01A1n h\\u00E0ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(90, \"div\", 14);\n        i0.ɵɵelement(91, \"textarea\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(92, \"div\", 26);\n        i0.ɵɵelementStart(93, \"div\", 27);\n        i0.ɵɵelementStart(94, \"h3\", 12);\n        i0.ɵɵtext(95, \"Th\\u00F4ng tin \\u0111\\u01A1n h\\u00E0ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(96, \"div\", 28);\n        i0.ɵɵelementStart(97, \"div\", 29);\n        i0.ɵɵelementStart(98, \"table\", 30);\n        i0.ɵɵelementStart(99, \"thead\");\n        i0.ɵɵelementStart(100, \"tr\");\n        i0.ɵɵelementStart(101, \"th\", 31);\n        i0.ɵɵtext(102, \"S\\u1EA3n ph\\u1EA9m\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(103, \"th\", 31);\n        i0.ɵɵtext(104, \"T\\u1ED5ng ti\\u1EC1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(105, \"tbody\");\n        i0.ɵɵtemplate(106, CheckoutComponent_tr_106_Template, 12, 6, \"tr\", 32);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(107, \"h4\", 33);\n        i0.ɵɵtext(108, \"T\\u1ED5ng ti\\u1EC1n: \");\n        i0.ɵɵelementStart(109, \"span\");\n        i0.ɵɵtext(110);\n        i0.ɵɵpipe(111, \"currencyVietnam\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(112, \"h4\", 33);\n        i0.ɵɵtext(113, \"Ti\\u1EBFt ki\\u1EC7m: \");\n        i0.ɵɵelementStart(114, \"span\");\n        i0.ɵɵtext(115);\n        i0.ɵɵpipe(116, \"currencyVietnam\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(117, \"h3\", 33);\n        i0.ɵɵtext(118, \"T\\u1ED5ng ti\\u1EC1n ph\\u1EA3i thanh to\\u00E1n: \");\n        i0.ɵɵelementStart(119, \"span\", 34);\n        i0.ɵɵtext(120);\n        i0.ɵɵpipe(121, \"currencyVietnam\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(122, \"p\", 35);\n        i0.ɵɵtext(123, \"Thanh t\\u00F3an khi nh\\u1EADn h\\u00E0ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(124, \"a\", 36);\n        i0.ɵɵlistener(\"click\", function CheckoutComponent_Template_a_click_124_listener() {\n          return ctx.checkOut();\n        });\n        i0.ɵɵtext(125, \"X\\u00E1c nh\\u1EADn thanh to\\u00E1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(126, \"br\");\n        i0.ɵɵelementStart(127, \"p\", 35);\n        i0.ɵɵtext(128, \"OR\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(129, \"p\", 35);\n        i0.ɵɵtext(130, \"Thanh to\\u00E1n online qua paypal\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(131, \"ngx-paypal\", 37);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        let tmp_4_0;\n        let tmp_5_0;\n        let tmp_7_0;\n        let tmp_9_0;\n        let tmp_11_0;\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(23, _c0));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(24, _c1));\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.postForm);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"value\", ctx.cart.user.name);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(25, _c2, ((tmp_4_0 = ctx.postForm.get(\"phone\")) == null ? null : tmp_4_0.touched) && ((tmp_4_0 = ctx.postForm.get(\"phone\")) == null ? null : tmp_4_0.invalid)));\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(27, _c2, ((tmp_5_0 = ctx.postForm.get(\"province\")) == null ? null : tmp_5_0.touched) && ((tmp_5_0 = ctx.postForm.get(\"province\")) == null ? null : tmp_5_0.invalid)));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.provinces);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(29, _c2, ((tmp_7_0 = ctx.postForm.get(\"district\")) == null ? null : tmp_7_0.touched) && ((tmp_7_0 = ctx.postForm.get(\"district\")) == null ? null : tmp_7_0.invalid)));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.districts);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(31, _c2, ((tmp_9_0 = ctx.postForm.get(\"ward\")) == null ? null : tmp_9_0.touched) && ((tmp_9_0 = ctx.postForm.get(\"ward\")) == null ? null : tmp_9_0.invalid)));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.wards);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(33, _c2, ((tmp_11_0 = ctx.postForm.get(\"number\")) == null ? null : tmp_11_0.touched) && ((tmp_11_0 = ctx.postForm.get(\"number\")) == null ? null : tmp_11_0.invalid)));\n        i0.ɵɵadvance(24);\n        i0.ɵɵproperty(\"ngForOf\", ctx.cartDetails);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(111, 17, ctx.amountReal));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(116, 19, ctx.discount + ctx.discountCart));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(121, 21, ctx.amount));\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"config\", ctx.payPalConfig);\n      }\n    },\n    directives: [i4.RouterLinkWithHref, i10.ɵNgNoValidate, i10.NgControlStatusGroup, i10.FormGroupDirective, i10.DefaultValueAccessor, i10.NgControlStatus, i10.FormControlName, i11.NgClass, i10.SelectControlValueAccessor, i10.NgSelectOption, i10.ɵNgSelectMultipleOption, i11.NgForOf, i12.NgxPaypalComponent],\n    pipes: [i13.CurrencyVietnamPipe],\n    styles: [\".ps-section__header[_ngcontent-%COMP%]{margin-top:-35px;margin-bottom:-15px}.ps-form__heading[_ngcontent-%COMP%]{font-size:20px}\"]\n  });\n  return CheckoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}