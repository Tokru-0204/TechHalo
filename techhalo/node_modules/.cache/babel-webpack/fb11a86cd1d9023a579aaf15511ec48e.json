{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"../../services_admin/supplier.service\";\nimport * as i3 from \"../../services_admin/upload.service\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/button\";\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nfunction EditSupplierComponent_Admin_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelementStart(1, \"h2\", 4);\n    i0.ɵɵtext(2, \"C\\u1EADp nh\\u1EADt th\\u00F4ng tin nh\\u00E0 cung c\\u1EA5p\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 5);\n    i0.ɵɵelementStart(4, \"form\", 6);\n    i0.ɵɵelement(5, \"input\", 7);\n    i0.ɵɵelementStart(6, \"div\", 8);\n    i0.ɵɵelementStart(7, \"label\", 9);\n    i0.ɵɵtext(8, \"T\\u00EAn nh\\u00E0 cung c\\u1EA5p:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 10);\n    i0.ɵɵelementStart(10, \"small\", 11);\n    i0.ɵɵtext(11, \"H\\u00E3y nh\\u1EADp t\\u00EAn nh\\u00E0 cung c\\u1EA5p\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 8);\n    i0.ɵɵelementStart(13, \"label\", 12);\n    i0.ɵɵtext(14, \"\\u0110\\u1ECBa ch\\u1EC9:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 13);\n    i0.ɵɵelementStart(16, \"small\", 11);\n    i0.ɵɵtext(17, \"H\\u00E3y nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 h\\u1EE3p l\\u1EC7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 8);\n    i0.ɵɵelementStart(19, \"label\", 14);\n    i0.ɵɵtext(20, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"input\", 15);\n    i0.ɵɵelementStart(22, \"small\", 11);\n    i0.ɵɵtext(23, \"H\\u00E3y nh\\u1EADp email \\u0111\\u00FAng \\u0111\\u1ECBnh d\\u1EA1ng\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\", 8);\n    i0.ɵɵelementStart(25, \"label\", 16);\n    i0.ɵɵtext(26, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"input\", 17);\n    i0.ɵɵelementStart(28, \"small\", 11);\n    i0.ɵɵtext(29, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i ph\\u1EA3i c\\u00F3 10-11 ch\\u1EEF s\\u1ED1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"div\", 8);\n    i0.ɵɵelementStart(31, \"label\", 18);\n    i0.ɵɵtext(32, \"Ng\\u00E0y t\\u1EA1o:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(33, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\", 20);\n    i0.ɵɵelementStart(35, \"h3\");\n    i0.ɵɵtext(36, \"H\\u00ECnh \\u1EA3nh nh\\u00E0 cung c\\u1EA5p\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"div\", 21);\n    i0.ɵɵelementStart(38, \"div\", 22);\n    i0.ɵɵelement(39, \"img\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"div\", 24);\n    i0.ɵɵelementStart(41, \"input\", 25);\n    i0.ɵɵlistener(\"change\", function EditSupplierComponent_Admin_ng_template_0_Template_input_change_41_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.onFileSelect($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"label\", 26);\n    i0.ɵɵtext(43, \"Ch\\u1ECDn \\u1EA3nh\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function EditSupplierComponent_Admin_ng_template_0_Template_button_click_44_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.update();\n    });\n    i0.ɵɵtext(45, \"C\\u1EADp nh\\u1EADt\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    let tmp_2_0;\n    let tmp_3_0;\n    let tmp_4_0;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.postForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ((tmp_1_0 = ctx_r1.postForm.get(\"name\")) == null ? null : tmp_1_0.touched) && ((tmp_1_0 = ctx_r1.postForm.get(\"name\")) == null ? null : tmp_1_0.invalid)));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ((tmp_2_0 = ctx_r1.postForm.get(\"address\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx_r1.postForm.get(\"address\")) == null ? null : tmp_2_0.invalid)));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c0, ((tmp_3_0 = ctx_r1.postForm.get(\"email\")) == null ? null : tmp_3_0.touched) && ((tmp_3_0 = ctx_r1.postForm.get(\"email\")) == null ? null : tmp_3_0.invalid)));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(13, _c0, ((tmp_4_0 = ctx_r1.postForm.get(\"phone\")) == null ? null : tmp_4_0.touched) && ((tmp_4_0 = ctx_r1.postForm.get(\"phone\")) == null ? null : tmp_4_0.invalid)));\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"src\", ctx_r1.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.postForm.invalid);\n  }\n}\nexport class EditSupplierComponent_Admin {\n  constructor(modalService, supplierService, uploadService, toastr) {\n    this.modalService = modalService;\n    this.supplierService = supplierService;\n    this.uploadService = uploadService;\n    this.toastr = toastr;\n    this.image = 'https://res.cloudinary.com/techhalo/image/upload/v1730101458/ry8qchrwe6iizswfcagi.jpg'; // Ảnh mặc định\n    this.id = 0; // Nhận ID nhà cung cấp từ component cha\n    this.editFinish = new EventEmitter();\n  }\n  ngOnInit() {\n    this.initializeForm(); // Khởi tạo form rỗng\n    this.getSupplier(); // Lấy dữ liệu nhà cung cấp\n    this.loadSuppliers(); // Lấy danh sách nhà cung cấp để kiểm tra tên\n  }\n  // Khởi tạo form với các trường cần thiết\n  initializeForm() {\n    var _a;\n    this.postForm = new FormGroup({\n      supplierId: new FormControl(0),\n      name: new FormControl(null, [Validators.required, Validators.minLength(2)]),\n      address: new FormControl(null, [Validators.required, Validators.minLength(2)]),\n      email: new FormControl(null, [Validators.required, Validators.email]),\n      phone: new FormControl(null, [Validators.required, Validators.pattern('^[0-9]{10,11}$')]),\n      image: new FormControl(this.image),\n      create_at: new FormControl(null) // Ngày tạo\n    });\n    // Thêm async validator kiểm tra trùng tên\n    (_a = this.postForm.get('name')) === null || _a === void 0 ? void 0 : _a.setAsyncValidators(this.nameExistsValidator.bind(this));\n  }\n  // Lấy tất cả nhà cung cấp\n  loadSuppliers() {\n    this.supplierService.getAll().subscribe(data => {\n      this.suppliers = data; // Giả sử dữ liệu từ API là một mảng các Supplier\n    }, error => {\n      this.toastr.error('Lỗi khi tải nhà cung cấp!', 'Hệ thống');\n    });\n  }\n  // Kiểm tra xem tên nhà cung cấp đã tồn tại chưa\n  nameExistsValidator(control) {\n    return new Promise(resolve => {\n      var _a;\n      const name = (_a = control.value) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n      // Kiểm tra tên trong danh sách nhà cung cấp đã lấy\n      const isNameExist = this.suppliers.some(supplier => supplier.name.toLowerCase() === name && supplier.supplierId !== this.id);\n      if (isNameExist) {\n        resolve({\n          nameExists: true\n        });\n      } else {\n        resolve(null);\n      }\n    });\n  }\n  // Lấy thông tin nhà cung cấp theo ID\n  getSupplier() {\n    this.supplierService.getOne(this.id).subscribe(data => {\n      this.supplier = data;\n      this.image = this.supplier.image || this.image; // Cập nhật ảnh hoặc giữ ảnh mặc định\n      this.postForm.patchValue({\n        supplierId: this.supplier.supplierId,\n        name: this.supplier.name,\n        address: this.supplier.address,\n        email: this.supplier.email,\n        phone: this.supplier.phone,\n        image: this.image,\n        create_at: this.supplier.create_at\n      });\n    }, error => {\n      this.modalService.dismissAll();\n      this.toastr.error('Lỗi! Không tìm thấy nhà cung cấp. ' + error, 'Hệ thống');\n    });\n  }\n  // Cập nhật thông tin nhà cung cấp\n  update() {\n    if (this.postForm.valid) {\n      this.supplierService.put(this.id, this.postForm.value).subscribe(() => {\n        this.modalService.dismissAll();\n        this.toastr.success('Cập nhật thành công!', 'Hệ thống');\n        this.editFinish.emit('done'); // Emit sự kiện để thông báo cập nhật hoàn tất\n      }, error => {\n        this.toastr.error('Cập nhật thất bại! ' + error, 'Hệ thống');\n      });\n    } else {\n      this.toastr.error('Vui lòng kiểm tra lại thông tin!', 'Hệ thống');\n    }\n  }\n  // Phương thức tải lên ảnh\n  onFileSelect(event) {\n    const file = event.target.files[0];\n    if (!file) return;\n    this.uploadService.uploadProduct(file).subscribe(response => {\n      if (response && response.secure_url) {\n        this.image = response.secure_url; // Cập nhật URL ảnh\n        this.postForm.patchValue({\n          image: this.image\n        }); // Gán URL vào form\n      }\n    }, error => {\n      this.toastr.error('Lỗi khi tải lên hình ảnh!', 'Hệ thống');\n    });\n  }\n  // Mở modal chỉnh sửa\n  open(content) {\n    this.modalService.open(content, {\n      centered: true,\n      size: 'lg'\n    });\n  }\n}\nEditSupplierComponent_Admin.ɵfac = function EditSupplierComponent_Admin_Factory(t) {\n  return new (t || EditSupplierComponent_Admin)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.SupplierService), i0.ɵɵdirectiveInject(i3.UploadService), i0.ɵɵdirectiveInject(i4.ToastrService));\n};\nEditSupplierComponent_Admin.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditSupplierComponent_Admin,\n  selectors: [[\"app-edit-supplier\"]],\n  inputs: {\n    id: \"id\"\n  },\n  outputs: {\n    editFinish: \"editFinish\"\n  },\n  decls: 4,\n  vars: 0,\n  consts: [[\"content\", \"\"], [2, \"color\", \"steelblue\", \"cursor\", \"pointer\", 3, \"click\"], [1, \"fas\", \"fa-edit\"], [1, \"modal-header\"], [1, \"modal-title\", \"m-0\"], [1, \"modal-body\", \"p-4\"], [3, \"formGroup\"], [\"type\", \"hidden\", \"formControlName\", \"supplierId\"], [1, \"form-group\", \"mb-3\"], [\"for\", \"name\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"name\", \"placeholder\", \"T\\u00EAn nh\\u00E0 cung c\\u1EA5p\", \"formControlName\", \"name\", 1, \"form-control\", 3, \"ngClass\"], [1, \"invalid-feedback\"], [\"for\", \"address\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"address\", \"placeholder\", \"\\u0110\\u1ECBa ch\\u1EC9\", \"formControlName\", \"address\", 1, \"form-control\", 3, \"ngClass\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"email\", \"placeholder\", \"Email\", \"formControlName\", \"email\", 1, \"form-control\", 3, \"ngClass\"], [\"for\", \"phone\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"phone\", \"placeholder\", \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\", \"formControlName\", \"phone\", 1, \"form-control\", 3, \"ngClass\"], [\"for\", \"create_at\", 1, \"form-label\"], [\"type\", \"date\", \"id\", \"create_at\", \"formControlName\", \"create_at\", \"readonly\", \"\", 1, \"form-control\"], [1, \"form-group\", \"text-center\"], [1, \"image-container\"], [1, \"main-image-wrapper\"], [\"alt\", \"H\\u00ECnh \\u1EA3nh nh\\u00E0 cung c\\u1EA5p\", 1, \"img-fluid\", \"main-image\", 3, \"src\"], [1, \"custom-file\", \"col-4\", \"mt-2\"], [\"type\", \"file\", \"id\", \"imageFile\", 1, \"custom-file-input\", 3, \"change\"], [\"for\", \"imageFile\", 1, \"custom-file-label\", \"form-control\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"]],\n  template: function EditSupplierComponent_Admin_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r7 = i0.ɵɵgetCurrentView();\n      i0.ɵɵtemplate(0, EditSupplierComponent_Admin_ng_template_0_Template, 46, 15, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(2, \"a\", 1);\n      i0.ɵɵlistener(\"click\", function EditSupplierComponent_Admin_Template_a_click_2_listener() {\n        i0.ɵɵrestoreView(_r7);\n        const _r0 = i0.ɵɵreference(1);\n        return ctx.open(_r0);\n      });\n      i0.ɵɵelement(3, \"i\", 2);\n      i0.ɵɵelementEnd();\n    }\n  },\n  directives: [i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i6.NgClass, i7.MatButton],\n  styles: [\".image-container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n    margin: 20px 0;\\r\\n  }\\r\\n  \\r\\n  .main-image-wrapper[_ngcontent-%COMP%] {\\r\\n    max-width: 200px;\\r\\n    margin-bottom: 15px;\\r\\n  }\\r\\n  \\r\\n  .main-image[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    object-fit: contain;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXQtc3VwcGxpZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsbUJBQW1CO0lBQ25CLGNBQWM7RUFDaEI7O0VBRUE7SUFDRSxnQkFBZ0I7SUFDaEIsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsV0FBVztJQUNYLG1CQUFtQjtFQUNyQiIsImZpbGUiOiJlZGl0LXN1cHBsaWVyLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW1hZ2UtY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIG1hcmdpbjogMjBweCAwO1xyXG4gIH1cclxuICBcclxuICAubWFpbi1pbWFnZS13cmFwcGVyIHtcclxuICAgIG1heC13aWR0aDogMjAwcHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gIH1cclxuICBcclxuICAubWFpbi1pbWFnZSB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG9iamVjdC1maXQ6IGNvbnRhaW47XHJcbiAgfVxyXG4gICJdfQ== */\"]\n});","map":{"version":3,"sources":["D:\\LapTrinh_FullStask\\TechHalo\\techhalo\\src\\app\\admin\\edit-supplier\\edit-supplier.component.ts","D:\\LapTrinh_FullStask\\TechHalo\\techhalo\\src\\app\\admin\\edit-supplier\\edit-supplier.component.html"],"names":[],"mappings":"AAAA,SAAoB,YAAY,QAA4C,eAAe;AAC3F,SAAS,WAAW,EAAE,SAAS,EAAE,UAAU,QAAQ,gBAAgB;;;;;;;;;;;;;;;;;ICA/D,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAA0B;IACtB,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA,EAAA,CAAA,CAA4B;IAAA,EAAA,CAAA,MAAA,CAAA,CAAA,EAAA,0DAAA,CAA+B;IAAA,EAAA,CAAA,YAAA,CAAA,CAAK;IACpE,EAAA,CAAA,YAAA,CAAA,CAAM;IACN,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAA4B;IACxB,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,MAAA,EAAA,CAAA,CAA6B;IAEzB,EAAA,CAAA,SAAA,CAAA,CAAA,EAAA,OAAA,EAAA,CAAA,CAAkD;IAGlD,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAA6B;IACzB,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,OAAA,EAAA,CAAA,CAAqC;IAAA,EAAA,CAAA,MAAA,CAAA,CAAA,EAAA,kCAAA,CAAiB;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IAC9D,EAAA,CAAA,SAAA,CAAA,CAAA,EAAA,OAAA,EAAA,EAAA,CAE8B;IAC9B,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAAgC;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,oDAAA,CAAyB;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IACrE,EAAA,CAAA,YAAA,CAAA,CAAM;IAGN,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA,CAA6B;IACzB,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAAwC;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,yBAAA,CAAQ;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IACxD,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAEiC;IACjC,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAAgC;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,4DAAA,CAAuB;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IACnE,EAAA,CAAA,YAAA,CAAA,CAAM;IAGN,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA,CAA6B;IACzB,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAAsC;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,QAAA,CAAM;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IACpD,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAE+B;IAC/B,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAAgC;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,kEAAA,CAA6B;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IACzE,EAAA,CAAA,YAAA,CAAA,CAAM;IAGN,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA,CAA6B;IACzB,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAAsC;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,oCAAA,CAAc;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IAC5D,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAE+B;IAC/B,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAAgC;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,4EAAA,CAAkC;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IAC9E,EAAA,CAAA,YAAA,CAAA,CAAM;IAGN,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA,CAA6B;IACzB,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAA0C;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,qBAAA,CAAS;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IAC3D,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAA4F;IAChG,EAAA,CAAA,YAAA,CAAA,CAAM;IACN,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAoC;IAChC,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,IAAA,CAAI;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,2CAAA,CAAqB;IAAA,EAAA,CAAA,YAAA,CAAA,CAAK;IAC9B,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAA6B;IAC3B,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAgC;IAC9B,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAA4E;IAC9E,EAAA,CAAA,YAAA,CAAA,CAAM;IACN,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAoC;IAClC,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAA4F;IAAhC,EAAA,CAAA,UAAA,CAAA,QAAA,EAAA,SAAA,2EAAA,CAAA,MAAA,EAAA;MAAA,EAAA,CAAA,aAAA,CAAA,GAAA,CAAA;MAAA,MAAA,MAAA,GAAA,EAAA,CAAA,aAAA,CAAA,CAAA;MAAA,OAAA,MAAA,CAAA,YAAA,CAAA,MAAA,CAAA;IAAA,CAAA,CAA+B;IAA3F,EAAA,CAAA,YAAA,CAAA,CAA4F;IAC5F,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA,CAA8D;IAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,oBAAA,CAAQ;IAAA,EAAA,CAAA,YAAA,CAAA,CAAQ;IAChF,EAAA,CAAA,YAAA,CAAA,CAAM;IACR,EAAA,CAAA,YAAA,CAAA,CAAM;IAEV,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,QAAA,EAAA,EAAA,CAA2F;IAAnB,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,2EAAA,CAAA,EAAA;MAAA,EAAA,CAAA,aAAA,CAAA,GAAA,CAAA;MAAA,MAAA,MAAA,GAAA,EAAA,CAAA,aAAA,CAAA,CAAA;MAAA,OAAA,MAAA,CAAA,MAAA,CAAA,CAAA;IAAA,CAAA,CAAkB;IAAC,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,oBAAA,CAAQ;IAAA,EAAA,CAAA,YAAA,CAAA,CAAS;IAC5G,EAAA,CAAA,YAAA,CAAA,CAAM;IAGV,EAAA,CAAA,YAAA,CAAA,CAAO;IACX,EAAA,CAAA,YAAA,CAAA,CAAM;;;;;;;;IA9DI,EAAA,CAAA,SAAA,CAAA,CAAA,CAAsB;IAAtB,EAAA,CAAA,UAAA,CAAA,WAAA,EAAA,MAAA,CAAA,QAAA,CAAsB;IAQb,EAAA,CAAA,SAAA,CAAA,CAAA,CAA0F;IAA1F,EAAA,CAAA,UAAA,CAAA,SAAA,EAAA,EAAA,CAAA,eAAA,CAAA,CAAA,EAAA,GAAA,EAAA,CAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,IAAA,GAAA,IAAA,GAAA,OAAA,CAAA,OAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,IAAA,GAAA,IAAA,GAAA,OAAA,CAAA,OAAA,CAAA,CAAA,CAA0F;IAS1F,EAAA,CAAA,SAAA,CAAA,CAAA,CAAgG;IAAhG,EAAA,CAAA,UAAA,CAAA,SAAA,EAAA,EAAA,CAAA,eAAA,CAAA,CAAA,EAAA,GAAA,EAAA,CAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,SAAA,CAAA,KAAA,IAAA,GAAA,IAAA,GAAA,OAAA,CAAA,OAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,SAAA,CAAA,KAAA,IAAA,GAAA,IAAA,GAAA,OAAA,CAAA,OAAA,CAAA,CAAA,CAAgG;IAShG,EAAA,CAAA,SAAA,CAAA,CAAA,CAA4F;IAA5F,EAAA,CAAA,UAAA,CAAA,SAAA,EAAA,EAAA,CAAA,eAAA,CAAA,EAAA,EAAA,GAAA,EAAA,CAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,OAAA,CAAA,KAAA,IAAA,GAAA,IAAA,GAAA,OAAA,CAAA,OAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,OAAA,CAAA,KAAA,IAAA,GAAA,IAAA,GAAA,OAAA,CAAA,OAAA,CAAA,CAAA,CAA4F;IAS5F,EAAA,CAAA,SAAA,CAAA,CAAA,CAA4F;IAA5F,EAAA,CAAA,UAAA,CAAA,SAAA,EAAA,EAAA,CAAA,eAAA,CAAA,EAAA,EAAA,GAAA,EAAA,CAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,OAAA,CAAA,KAAA,IAAA,GAAA,IAAA,GAAA,OAAA,CAAA,OAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,OAAA,CAAA,KAAA,IAAA,GAAA,IAAA,GAAA,OAAA,CAAA,OAAA,CAAA,CAAA,CAA4F;IAc1F,EAAA,CAAA,SAAA,CAAA,EAAA,CAAa;IAAb,EAAA,CAAA,UAAA,CAAA,KAAA,EAAA,MAAA,CAAA,KAAA,EAAA,EAAA,CAAA,aAAA,CAAa;IAQgB,EAAA,CAAA,SAAA,CAAA,CAAA,CAA6B;IAA7B,EAAA,CAAA,UAAA,CAAA,UAAA,EAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAA6B;;;ADjDnF,OAAM,MAAO,2BAA2B,CAAA;EAStC,WAAA,CACU,YAAsB,EACtB,eAAgC,EAChC,aAA4B,EAC5B,MAAqB,EAAA;IAHrB,IAAA,CAAA,YAAY,GAAZ,YAAY;IACZ,IAAA,CAAA,eAAe,GAAf,eAAe;IACf,IAAA,CAAA,aAAa,GAAb,aAAa;IACb,IAAA,CAAA,MAAM,GAAN,MAAM;IAVhB,IAAA,CAAA,KAAK,GAAW,uFAAuF,CAAC,CAAC;IAGhG,IAAA,CAAA,EAAE,GAAG,CAAC,CAAC,CAAC;IACP,IAAA,CAAA,UAAU,GAAsB,IAAI,YAAY,CAAA,CAAO;EAO9D;EAEH,QAAQ,CAAA,EAAA;IACN,IAAI,CAAC,cAAc,CAAA,CAAE,CAAC,CAAC;IACvB,IAAI,CAAC,WAAW,CAAA,CAAE,CAAC,CAAC;IACpB,IAAI,CAAC,aAAa,CAAA,CAAE,CAAC,CAAC;EACxB;EAEA;EACQ,cAAc,CAAA,EAAA;;IACpB,IAAI,CAAC,QAAQ,GAAG,IAAI,SAAS,CAAC;MAC5B,UAAU,EAAE,IAAI,WAAW,CAAC,CAAC,CAAC;MAC9B,IAAI,EAAE,IAAI,WAAW,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,QAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MAC3E,OAAO,EAAE,IAAI,WAAW,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,QAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9E,KAAK,EAAE,IAAI,WAAW,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,QAAQ,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;MACrE,KAAK,EAAE,IAAI,WAAW,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;MACzF,KAAK,EAAE,IAAI,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC;MAClC,SAAS,EAAE,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;KAClC,CAAC;IAEF;IACA,CAAA,EAAA,GAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,kBAAkB,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACpF;EAEA;EACA,aAAa,CAAA,EAAA;IACX,IAAI,CAAC,eAAe,CAAC,MAAM,CAAA,CAAE,CAAC,SAAS,CACpC,IAAI,IAAI;MACP,IAAI,CAAC,SAAS,GAAe,IAAI,CAAC,CAAC;IACrC,CAAC,EACD,KAAK,IAAG;MACN,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B,EAAE,UAAU,CAAC;IAC5D,CAAC,CACF;EACH;EAEA;EACA,mBAAmB,CAAC,OAAoB,EAAA;IACtC,OAAO,IAAI,OAAO,CAAE,OAAO,IAAI;;MAC7B,MAAM,IAAI,GAAG,CAAA,EAAA,GAAA,OAAO,CAAC,KAAK,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,WAAW,CAAA,CAAE;MACzC;MACA,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CACpC,QAAQ,IAAK,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAA,CAAE,KAAK,IAAI,IAAI,QAAQ,CAAC,UAAU,KAAK,IAAI,CAAC,EAAE,CACtF;MAED,IAAI,WAAW,EAAE;QACf,OAAO,CAAC;UAAE,UAAU,EAAE;QAAI,CAAE,CAAC;OAC9B,MAAM;QACL,OAAO,CAAC,IAAI,CAAC;MACd;IACH,CAAC,CAAC;EACJ;EAEA;EACA,WAAW,CAAA,EAAA;IACT,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CAC3C,IAAI,IAAI;MACP,IAAI,CAAC,QAAQ,GAAG,IAAgB;MAChC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;MAChD,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;QACvB,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,UAAU;QACpC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI;QACxB,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO;QAC9B,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK;QAC1B,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK;QAC1B,KAAK,EAAE,IAAI,CAAC,KAAK;QACjB,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC;OAC1B,CAAC;IACJ,CAAC,EACA,KAAK,IAAI;MACR,IAAI,CAAC,YAAY,CAAC,UAAU,CAAA,CAAE;MAC9B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,oCAAoC,GAAG,KAAK,EAAE,UAAU,CAAC;IAC7E,CAAC,CACF;EACH;EAEA;EACA,MAAM,CAAA,EAAA;IACJ,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;MACvB,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,SAAS,CAC9D,MAAK;QACH,IAAI,CAAC,YAAY,CAAC,UAAU,CAAA,CAAE;QAC9B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,sBAAsB,EAAE,UAAU,CAAC;QACvD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;MAChC,CAAC,EACA,KAAK,IAAI;QACR,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,qBAAqB,GAAG,KAAK,EAAE,UAAU,CAAC;MAC9D,CAAC,CACF;KACF,MAAM;MACL,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,kCAAkC,EAAE,UAAU,CAAC;IAClE;EACH;EAEA;EACA,YAAY,CAAC,KAAU,EAAA;IACrB,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAAC,IAAI,EAAE;IAEX,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,SAAS,CAC7C,QAAQ,IAAI;MACX,IAAI,QAAQ,IAAI,QAAQ,CAAC,UAAU,EAAE;QACnC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;UAAE,KAAK,EAAE,IAAI,CAAC;QAAK,CAAE,CAAC,CAAC,CAAC;MAClD;IACH,CAAC,EACA,KAAK,IAAI;MACR,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B,EAAE,UAAU,CAAC;IAC5D,CAAC,CACF;EACH;EAEA;EACA,IAAI,CAAC,OAAyB,EAAA;IAC5B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE;MAAE,QAAQ,EAAE,IAAI;MAAE,IAAI,EAAE;IAAI,CAAE,CAAC;EACjE;;;mBAjIW,2BAA2B,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,QAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,eAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,aAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,aAAA,CAAA,CAAA;AAAA,CAAA;;QAA3B,2BAA2B;EAAA,SAAA,EAAA,CAAA,CAAA,mBAAA,CAAA,CAAA;EAAA,MAAA,EAAA;IAAA,EAAA,EAAA;EAAA,CAAA;EAAA,OAAA,EAAA;IAAA,UAAA,EAAA;EAAA,CAAA;EAAA,KAAA,EAAA,CAAA;EAAA,IAAA,EAAA,CAAA;EAAA,MAAA,EAAA,CAAA,CAAA,SAAA,EAAA,EAAA,CAAA,EAAA,CAAA,CAAA,EAAA,OAAA,EAAA,WAAA,EAAA,QAAA,EAAA,SAAA,EAAA,CAAA,EAAA,OAAA,CAAA,EAAA,CAAA,CAAA,EAAA,KAAA,EAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,cAAA,CAAA,EAAA,CAAA,CAAA,EAAA,aAAA,EAAA,KAAA,CAAA,EAAA,CAAA,CAAA,EAAA,YAAA,EAAA,KAAA,CAAA,EAAA,CAAA,CAAA,EAAA,WAAA,CAAA,EAAA,CAAA,MAAA,EAAA,QAAA,EAAA,iBAAA,EAAA,YAAA,CAAA,EAAA,CAAA,CAAA,EAAA,YAAA,EAAA,MAAA,CAAA,EAAA,CAAA,KAAA,EAAA,MAAA,EAAA,CAAA,EAAA,YAAA,CAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,IAAA,EAAA,MAAA,EAAA,aAAA,EAAA,iCAAA,EAAA,iBAAA,EAAA,MAAA,EAAA,CAAA,EAAA,cAAA,EAAA,CAAA,EAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,kBAAA,CAAA,EAAA,CAAA,KAAA,EAAA,SAAA,EAAA,CAAA,EAAA,YAAA,CAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,IAAA,EAAA,SAAA,EAAA,aAAA,EAAA,wBAAA,EAAA,iBAAA,EAAA,SAAA,EAAA,CAAA,EAAA,cAAA,EAAA,CAAA,EAAA,SAAA,CAAA,EAAA,CAAA,KAAA,EAAA,OAAA,EAAA,CAAA,EAAA,YAAA,CAAA,EAAA,CAAA,MAAA,EAAA,OAAA,EAAA,IAAA,EAAA,OAAA,EAAA,aAAA,EAAA,OAAA,EAAA,iBAAA,EAAA,OAAA,EAAA,CAAA,EAAA,cAAA,EAAA,CAAA,EAAA,SAAA,CAAA,EAAA,CAAA,KAAA,EAAA,OAAA,EAAA,CAAA,EAAA,YAAA,CAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,IAAA,EAAA,OAAA,EAAA,aAAA,EAAA,mCAAA,EAAA,iBAAA,EAAA,OAAA,EAAA,CAAA,EAAA,cAAA,EAAA,CAAA,EAAA,SAAA,CAAA,EAAA,CAAA,KAAA,EAAA,WAAA,EAAA,CAAA,EAAA,YAAA,CAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,IAAA,EAAA,WAAA,EAAA,iBAAA,EAAA,WAAA,EAAA,UAAA,EAAA,EAAA,EAAA,CAAA,EAAA,cAAA,CAAA,EAAA,CAAA,CAAA,EAAA,YAAA,EAAA,aAAA,CAAA,EAAA,CAAA,CAAA,EAAA,iBAAA,CAAA,EAAA,CAAA,CAAA,EAAA,oBAAA,CAAA,EAAA,CAAA,KAAA,EAAA,2CAAA,EAAA,CAAA,EAAA,WAAA,EAAA,YAAA,EAAA,CAAA,EAAA,KAAA,CAAA,EAAA,CAAA,CAAA,EAAA,aAAA,EAAA,OAAA,EAAA,MAAA,CAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,IAAA,EAAA,WAAA,EAAA,CAAA,EAAA,mBAAA,EAAA,CAAA,EAAA,QAAA,CAAA,EAAA,CAAA,KAAA,EAAA,WAAA,EAAA,CAAA,EAAA,mBAAA,EAAA,cAAA,CAAA,EAAA,CAAA,mBAAA,EAAA,EAAA,EAAA,OAAA,EAAA,SAAA,EAAA,CAAA,EAAA,UAAA,EAAA,OAAA,CAAA,CAAA;EAAA,QAAA,EAAA,SAAA,oCAAA,CAAA,EAAA,EAAA,GAAA,EAAA;IAAA,IAAA,EAAA,GAAA,CAAA,EAAA;;MCbxC,EAAA,CAAA,UAAA,CAAA,CAAA,EAAA,kDAAA,EAAA,EAAA,EAAA,EAAA,EAAA,aAAA,EAAA,IAAA,EAAA,CAAA,EAAA,EAAA,CAAA,sBAAA,CAoEc;MAGd,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,GAAA,EAAA,CAAA,CAAsE;MAAxB,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,uDAAA,CAAA,EAAA;QAAA,EAAA,CAAA,aAAA,CAAA,GAAA,CAAA;QAAA,MAAA,GAAA,GAAA,EAAA,CAAA,WAAA,CAAA,CAAA,CAAA;QAAA,OAAS,GAAA,CAAA,IAAA,CAAA,GAAA,CAAa;MAAA,CAAA,CAAC;MAAC,EAAA,CAAA,SAAA,CAAA,CAAA,EAAA,GAAA,EAAA,CAAA,CAA2B;MAAA,EAAA,CAAA,YAAA,CAAA,CAAI","sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output, TemplateRef } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Supplier } from '../../common/Supplier';\r\nimport { SupplierService } from '../../services_admin/supplier.service';\r\nimport { UploadService } from '../../services_admin/upload.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-supplier',\r\n  templateUrl: './edit-supplier.component.html',\r\n  styleUrls: ['./edit-supplier.component.css']\r\n})\r\nexport class EditSupplierComponent_Admin implements OnInit {\r\n  postForm!: FormGroup; // Form chỉnh sửa nhà cung cấp\r\n  supplier!: Supplier; // Nhà cung cấp hiện tại\r\n  image: string = 'https://res.cloudinary.com/techhalo/image/upload/v1730101458/ry8qchrwe6iizswfcagi.jpg'; // Ảnh mặc định\r\n  suppliers!: Supplier[]; // Danh sách nhà cung cấp\r\n\r\n  @Input() id = 0; // Nhận ID nhà cung cấp từ component cha\r\n  @Output() editFinish: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    private modalService: NgbModal,\r\n    private supplierService: SupplierService,\r\n    private uploadService: UploadService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.initializeForm(); // Khởi tạo form rỗng\r\n    this.getSupplier(); // Lấy dữ liệu nhà cung cấp\r\n    this.loadSuppliers(); // Lấy danh sách nhà cung cấp để kiểm tra tên\r\n  }\r\n\r\n  // Khởi tạo form với các trường cần thiết\r\n  private initializeForm(): void {\r\n    this.postForm = new FormGroup({\r\n      supplierId: new FormControl(0), // ID nhà cung cấp, mặc định là 0\r\n      name: new FormControl(null, [Validators.required, Validators.minLength(2)]), // Tên nhà cung cấp\r\n      address: new FormControl(null, [Validators.required, Validators.minLength(2)]), // Địa chỉ\r\n      email: new FormControl(null, [Validators.required, Validators.email]), // Email\r\n      phone: new FormControl(null, [Validators.required, Validators.pattern('^[0-9]{10,11}$')]), // Số điện thoại\r\n      image: new FormControl(this.image), // Ảnh đại diện\r\n      create_at: new FormControl(null) // Ngày tạo\r\n    });\r\n\r\n    // Thêm async validator kiểm tra trùng tên\r\n    this.postForm.get('name')?.setAsyncValidators(this.nameExistsValidator.bind(this));\r\n  }\r\n\r\n  // Lấy tất cả nhà cung cấp\r\n  loadSuppliers(): void {\r\n    this.supplierService.getAll().subscribe(\r\n      (data) => {\r\n        this.suppliers = <Supplier[]>data; // Giả sử dữ liệu từ API là một mảng các Supplier\r\n      },\r\n      error => {\r\n        this.toastr.error('Lỗi khi tải nhà cung cấp!', 'Hệ thống');\r\n      }\r\n    );\r\n  }\r\n\r\n  // Kiểm tra xem tên nhà cung cấp đã tồn tại chưa\r\n  nameExistsValidator(control: FormControl): Promise<any> | Observable<any> {\r\n    return new Promise((resolve) => {\r\n      const name = control.value?.toLowerCase();\r\n      // Kiểm tra tên trong danh sách nhà cung cấp đã lấy\r\n      const isNameExist = this.suppliers.some(\r\n        (supplier) => supplier.name.toLowerCase() === name && supplier.supplierId !== this.id\r\n      );\r\n      \r\n      if (isNameExist) {\r\n        resolve({ nameExists: true });\r\n      } else {\r\n        resolve(null);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Lấy thông tin nhà cung cấp theo ID\r\n  getSupplier(): void {\r\n    this.supplierService.getOne(this.id).subscribe(\r\n      (data) => {\r\n        this.supplier = data as Supplier;\r\n        this.image = this.supplier.image || this.image; // Cập nhật ảnh hoặc giữ ảnh mặc định\r\n        this.postForm.patchValue({\r\n          supplierId: this.supplier.supplierId,\r\n          name: this.supplier.name,\r\n          address: this.supplier.address,\r\n          email: this.supplier.email,\r\n          phone: this.supplier.phone,\r\n          image: this.image,\r\n          create_at: this.supplier.create_at\r\n        });\r\n      },\r\n      (error) => {\r\n        this.modalService.dismissAll();\r\n        this.toastr.error('Lỗi! Không tìm thấy nhà cung cấp. ' + error, 'Hệ thống');\r\n      }\r\n    );\r\n  }\r\n\r\n  // Cập nhật thông tin nhà cung cấp\r\n  update(): void {\r\n    if (this.postForm.valid) {\r\n      this.supplierService.put(this.id, this.postForm.value).subscribe(\r\n        () => {\r\n          this.modalService.dismissAll();\r\n          this.toastr.success('Cập nhật thành công!', 'Hệ thống');\r\n          this.editFinish.emit('done'); // Emit sự kiện để thông báo cập nhật hoàn tất\r\n        },\r\n        (error) => {\r\n          this.toastr.error('Cập nhật thất bại! ' + error, 'Hệ thống');\r\n        }\r\n      );\r\n    } else {\r\n      this.toastr.error('Vui lòng kiểm tra lại thông tin!', 'Hệ thống');\r\n    }\r\n  }\r\n\r\n  // Phương thức tải lên ảnh\r\n  onFileSelect(event: any): void {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    this.uploadService.uploadProduct(file).subscribe(\r\n      (response) => {\r\n        if (response && response.secure_url) {\r\n          this.image = response.secure_url; // Cập nhật URL ảnh\r\n          this.postForm.patchValue({ image: this.image }); // Gán URL vào form\r\n        }\r\n      },\r\n      (error) => {\r\n        this.toastr.error('Lỗi khi tải lên hình ảnh!', 'Hệ thống');\r\n      }\r\n    );\r\n  }\r\n\r\n  // Mở modal chỉnh sửa\r\n  open(content: TemplateRef<any>): void {\r\n    this.modalService.open(content, { centered: true, size: 'lg' });\r\n  }\r\n}\r\n","<ng-template #content let-c=\"close\" let-d=\"dismiss\">\r\n    <div class=\"modal-header\">\r\n        <h2 class=\"modal-title m-0\">Cập nhật thông tin nhà cung cấp</h2>\r\n    </div>\r\n    <div class=\"modal-body p-4\">\r\n        <form [formGroup]=\"postForm\">\r\n            <!-- Hidden field cho ID nhà cung cấp -->\r\n            <input type=\"hidden\" formControlName=\"supplierId\">\r\n\r\n            <!-- Tên nhà cung cấp -->\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"name\" class=\"form-label\">Tên nhà cung cấp:</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"name\" placeholder=\"Tên nhà cung cấp\" \r\n                       [ngClass]=\"{'is-invalid': postForm.get('name')?.touched && postForm.get('name')?.invalid}\" \r\n                       formControlName=\"name\">\r\n                <small class=\"invalid-feedback\">Hãy nhập tên nhà cung cấp</small>\r\n            </div>\r\n\r\n            <!-- Địa chỉ -->\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"address\" class=\"form-label\">Địa chỉ:</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"address\" placeholder=\"Địa chỉ\" \r\n                       [ngClass]=\"{'is-invalid': postForm.get('address')?.touched && postForm.get('address')?.invalid}\" \r\n                       formControlName=\"address\">\r\n                <small class=\"invalid-feedback\">Hãy nhập địa chỉ hợp lệ</small>\r\n            </div>\r\n\r\n            <!-- Email -->\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"email\" class=\"form-label\">Email:</label>\r\n                <input type=\"email\" class=\"form-control\" id=\"email\" placeholder=\"Email\" \r\n                       [ngClass]=\"{'is-invalid': postForm.get('email')?.touched && postForm.get('email')?.invalid}\" \r\n                       formControlName=\"email\">\r\n                <small class=\"invalid-feedback\">Hãy nhập email đúng định dạng</small>\r\n            </div>\r\n\r\n            <!-- Số điện thoại -->\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"phone\" class=\"form-label\">Số điện thoại:</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"phone\" placeholder=\"Số điện thoại\" \r\n                       [ngClass]=\"{'is-invalid': postForm.get('phone')?.touched && postForm.get('phone')?.invalid}\" \r\n                       formControlName=\"phone\">\r\n                <small class=\"invalid-feedback\">Số điện thoại phải có 10-11 chữ số</small>\r\n            </div>\r\n\r\n            <!-- Ngày tạo -->\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"create_at\" class=\"form-label\">Ngày tạo:</label>\r\n                <input type=\"date\" class=\"form-control\" id=\"create_at\" formControlName=\"create_at\" readonly>\r\n            </div>\r\n            <div class=\"form-group text-center\">\r\n                <h3>Hình ảnh nhà cung cấp</h3>\r\n                <div class=\"image-container\">\r\n                  <div class=\"main-image-wrapper\">\r\n                    <img [src]=\"image\" class=\"img-fluid main-image\" alt=\"Hình ảnh nhà cung cấp\">\r\n                  </div>\r\n                  <div class=\"custom-file col-4 mt-2\">\r\n                    <input type=\"file\" class=\"custom-file-input\" id=\"imageFile\" (change)=\"onFileSelect($event)\">\r\n                    <label class=\"custom-file-label form-control\" for=\"imageFile\">Chọn ảnh</label>\r\n                  </div>\r\n                </div>\r\n                <!-- Nút cập nhật -->\r\n            <button mat-raised-button color=\"primary\" [disabled]=\"postForm.invalid\" (click)=\"update()\">Cập nhật</button>\r\n            </div>\r\n\r\n            \r\n        </form>\r\n    </div>\r\n</ng-template>\r\n\r\n<!-- Nút mở modal -->\r\n<a style=\"color: steelblue; cursor: pointer;\" (click)=\"open(content)\"><i class=\"fas fa-edit\"></i></a>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}