{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { Chart, registerables } from 'chart.js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services_admin/page.service\";\nimport * as i2 from \"../../services_admin/product.service\";\nimport * as i3 from \"@angular/material/table\";\nimport * as i4 from \"@angular/material/sort\";\nimport * as i5 from \"@angular/material/paginator\";\nfunction SoldestComponent_Admin_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 23);\n  }\n}\nfunction SoldestComponent_Admin_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵelement(1, \"img\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", row_r12.image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction SoldestComponent_Admin_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 26);\n    i0.ɵɵtext(1, \"M\\u00E3 s\\u1EA3n ph\\u1EA9m\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SoldestComponent_Admin_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r13.codeProduct);\n  }\n}\nfunction SoldestComponent_Admin_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 27);\n    i0.ɵɵtext(1, \"T\\u00EAn s\\u1EA3n ph\\u1EA9m\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SoldestComponent_Admin_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r14.normalPart);\n  }\n}\nfunction SoldestComponent_Admin_th_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 28);\n    i0.ɵɵtext(1, \"S\\u1ED1 l\\u01B0\\u1EE3ng b\\u00E1n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SoldestComponent_Admin_td_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r15.sold);\n  }\n}\nfunction SoldestComponent_Admin_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 29);\n    i0.ɵɵtext(1, \"Lo\\u1EA1i s\\u1EA3n ph\\u1EA9m\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SoldestComponent_Admin_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r16.category.categoryName);\n  }\n}\nfunction SoldestComponent_Admin_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 30);\n  }\n}\nfunction SoldestComponent_Admin_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 31);\n  }\n}\nconst _c0 = function () {\n  return [10, 25, 50, 100];\n};\nexport let SoldestComponent_Admin = /*#__PURE__*/(() => {\n  class SoldestComponent_Admin {\n    constructor(pageService, productService) {\n      this.pageService = pageService;\n      this.productService = productService;\n      this.columns = ['image', 'productId', 'name', 'sold', 'category'];\n      this.labels = [];\n      this.data = [];\n    }\n    ngOnInit() {\n      this.pageService.setPageActive('soldest');\n      this.getProduct();\n      Chart.register(...registerables);\n    }\n    getProduct() {\n      this.productService.getBestSeller().subscribe(data => {\n        this.products = data;\n        this.listData = new MatTableDataSource(this.products);\n        this.listData.sort = this.sort;\n        this.listData.paginator = this.paginator;\n        // Clear existing labels and data\n        this.labels = [];\n        this.data = [];\n        // Process the first 10 products for their names and prepare data\n        for (let i = 0; i < 10; i++) {\n          const name = this.products[i].name.trim();\n          const indexOfSlash = name.indexOf('/');\n          // If a slash exists in the name, split it\n          if (indexOfSlash !== -1) {\n            // Normal part before the slash\n            this.products[i].normalPart = name.substring(0, indexOfSlash).trim();\n            // Remaining part after the last space in normalPart\n            const lastSpaceIndex = this.products[i].normalPart.lastIndexOf(' ');\n            this.products[i].normalPart = name.substring(0, lastSpaceIndex).trim();\n            // Remaining part after the last space is considered as styled part\n            this.products[i].styledPart = name.substring(lastSpaceIndex).trim();\n          } else {\n            // If no slash exists, the entire name is considered normal part\n            this.products[i].normalPart = name;\n            this.products[i].styledPart = '';\n          }\n          // Add the processed name (normal part) to the labels\n          this.labels.push(this.products[i].normalPart);\n          // Add the sold quantity or quantity to the data for the chart\n          this.data.push(this.products[i].sold); // You can also use `quantity` if required\n        }\n        // After processing, load the chart with updated data\n        this.loadChartBar();\n      }, error => {\n        console.log(error);\n      });\n    }\n    loadChartBar() {\n      this.myChartBar = new Chart('chart', {\n        type: 'polarArea',\n        data: {\n          labels: this.labels,\n          datasets: [{\n            data: this.data,\n            backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)', 'rgba(75, 192, 192, 0.6)', 'rgba(153, 102, 255, 0.6)', 'rgba(255, 159, 64, 0.6)', 'rgba(201, 203, 207, 0.6)', 'rgba(0, 162, 71, 0.6)', 'rgba(82, 0, 36, 0.6)', 'rgba(82, 164, 36, 0.6)', 'rgba(255, 158, 146, 0.6)', 'rgba(123, 39, 56, 0.6)'],\n            borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)', 'rgba(201, 203, 207, 1)', 'rgba(0, 162, 71, 1)', 'rgba(82, 0, 36, 1)', 'rgba(82, 164, 36, 1)', 'rgba(255, 158, 146, 1)', 'rgba(123, 39, 56, 1)'],\n            borderWidth: 2\n          }]\n        },\n        options: {\n          scales: {\n            y: {\n              beginAtZero: true\n            }\n          },\n          plugins: {\n            legend: {\n              display: true\n            }\n          }\n        }\n      });\n    }\n  }\n  SoldestComponent_Admin.ɵfac = function SoldestComponent_Admin_Factory(t) {\n    return new (t || SoldestComponent_Admin)(i0.ɵɵdirectiveInject(i1.PageService), i0.ɵɵdirectiveInject(i2.ProductService));\n  };\n  SoldestComponent_Admin.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SoldestComponent_Admin,\n    selectors: [[\"app-soldest\"]],\n    viewQuery: function SoldestComponent_Admin_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatSort, 5);\n        i0.ɵɵviewQuery(MatPaginator, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      }\n    },\n    decls: 28,\n    vars: 7,\n    consts: [[1, \"container-fluid\"], [1, \"d-sm-flex\", \"align-items-center\", \"justify-content-between\", \"mb-4\"], [1, \"h3\", \"mb-0\", \"text-gray-800\"], [1, \"row\"], [1, \"col-7\"], [\"mat-table\", \"\", \"matSort\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"image\"], [\"mat-header-cell\", \"\", \"style\", \"width: 7%;\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"productId\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", \"style\", \"width: 7%\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"name\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", \"style\", \"width: 37%;\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"sold\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", \"style\", \"width: 10%;\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"category\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", \"style\", \"width: 14%;\", 4, \"matHeaderCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"length\", \"pageSize\", \"pageSizeOptions\"], [1, \"col-5\", \"m-auto\"], [\"id\", \"divChart\", 2, \"width\", \"90%\", \"margin-left\", \"2%\"], [\"id\", \"chart\"], [\"mat-header-cell\", \"\", 2, \"width\", \"7%\"], [\"mat-cell\", \"\"], [\"width\", \"36px\", 3, \"src\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 2, \"width\", \"7%\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 2, \"width\", \"37%\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 2, \"width\", \"10%\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 2, \"width\", \"14%\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function SoldestComponent_Admin_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h1\", 2);\n        i0.ɵɵtext(3, \"Top 10 s\\u1EA3n ph\\u1EA9m b\\u00E1n ch\\u1EA1y nh\\u1EA5t\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"table\", 5);\n        i0.ɵɵelementContainerStart(7, 6);\n        i0.ɵɵtemplate(8, SoldestComponent_Admin_th_8_Template, 1, 0, \"th\", 7);\n        i0.ɵɵtemplate(9, SoldestComponent_Admin_td_9_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(10, 9);\n        i0.ɵɵtemplate(11, SoldestComponent_Admin_th_11_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(12, SoldestComponent_Admin_td_12_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(13, 11);\n        i0.ɵɵtemplate(14, SoldestComponent_Admin_th_14_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(15, SoldestComponent_Admin_td_15_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(16, 13);\n        i0.ɵɵtemplate(17, SoldestComponent_Admin_th_17_Template, 2, 0, \"th\", 14);\n        i0.ɵɵtemplate(18, SoldestComponent_Admin_td_18_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(19, 15);\n        i0.ɵɵtemplate(20, SoldestComponent_Admin_th_20_Template, 2, 0, \"th\", 16);\n        i0.ɵɵtemplate(21, SoldestComponent_Admin_td_21_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(22, SoldestComponent_Admin_tr_22_Template, 1, 0, \"tr\", 17);\n        i0.ɵɵtemplate(23, SoldestComponent_Admin_tr_23_Template, 1, 0, \"tr\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"mat-paginator\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 20);\n        i0.ɵɵelementStart(26, \"div\", 21);\n        i0.ɵɵelement(27, \"canvas\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"dataSource\", ctx.listData);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.columns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.columns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"length\", ctx.productsLength)(\"pageSize\", 10)(\"pageSizeOptions\", i0.ɵɵpureFunction0(6, _c0));\n      }\n    },\n    directives: [i3.MatTable, i4.MatSort, i3.MatColumnDef, i3.MatHeaderCellDef, i3.MatCellDef, i3.MatHeaderRowDef, i3.MatRowDef, i5.MatPaginator, i3.MatHeaderCell, i3.MatCell, i4.MatSortHeader, i3.MatHeaderRow, i3.MatRow],\n    styles: [\"\"]\n  });\n  return SoldestComponent_Admin;\n})();","map":null,"metadata":{},"sourceType":"module"}