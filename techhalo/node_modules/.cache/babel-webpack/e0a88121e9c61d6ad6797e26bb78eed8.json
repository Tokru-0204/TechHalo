{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../rate/rate.component\";\nimport * as i7 from \"../../pipes/currency-vietnam.pipe\";\nfunction OrderDetailComponent_ng_template_0_th_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 10);\n    i0.ɵɵtext(1, \"\\u0110\\u00E1nh gi\\u00E1\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderDetailComponent_ng_template_0_tr_21_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 10);\n    i0.ɵɵelementStart(1, \"app-rate\", 15);\n    i0.ɵɵlistener(\"editFinish\", function OrderDetailComponent_ng_template_0_tr_21_td_11_Template_app_rate_editFinish_1_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return ctx_r9.finish();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"orderDetail\", item_r6);\n  }\n}\nconst _c0 = function (a0) {\n  return [a0];\n};\nfunction OrderDetailComponent_ng_template_0_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"img\", 14);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currencyVietnam\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 10);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, OrderDetailComponent_ng_template_0_tr_21_td_11_Template, 2, 1, \"td\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    const i_r7 = ctx.index;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r7 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", item_r6.product.image, i0.ɵɵsanitizeUrl)(\"routerLink\", i0.ɵɵpureFunction1(9, _c0, \"/product-detail/\" + item_r6.product.productId));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r6.product.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 7, item_r6.price));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r6.quantity);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.order.status == 4);\n  }\n}\nfunction OrderDetailComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelementStart(1, \"h4\", 4);\n    i0.ɵɵtext(2, \"Chi ti\\u1EBFt \\u0111\\u01A1n h\\u00E0ng\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h4\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currencyVietnam\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6);\n    i0.ɵɵelementStart(7, \"div\", 7);\n    i0.ɵɵelementStart(8, \"table\", 8);\n    i0.ɵɵelementStart(9, \"thead\");\n    i0.ɵɵelementStart(10, \"tr\", 9);\n    i0.ɵɵelementStart(11, \"th\", 10);\n    i0.ɵɵtext(12, \"STT\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"S\\u1EA3n ph\\u1EA9m\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Gi\\u00E1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\", 11);\n    i0.ɵɵtext(18, \"S\\u1ED1 l\\u01B0\\u1EE3ng\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, OrderDetailComponent_ng_template_0_th_19_Template, 2, 0, \"th\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, OrderDetailComponent_ng_template_0_tr_21_Template, 12, 11, \"tr\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"T\\u1ED5ng ti\\u1EC1n: \", i0.ɵɵpipeBind1(5, 3, ctx_r1.order.amount), \"\");\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.order.status == 4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.orderDetails);\n  }\n}\nexport let OrderDetailComponent = /*#__PURE__*/(() => {\n  class OrderDetailComponent {\n    constructor(modalService, orderService, toastr) {\n      this.modalService = modalService;\n      this.orderService = orderService;\n      this.toastr = toastr;\n      this.check = true;\n    }\n    ngOnInit() {\n      this.getOrder();\n      this.getItems();\n    }\n    getOrder() {\n      this.orderService.getById(this.id).subscribe(data => {\n        this.order = data;\n      }, error => {\n        this.toastr.error('Lỗi server', 'Hệ thống');\n      });\n    }\n    getItems() {\n      this.orderService.getByOrder(this.id).subscribe(data => {\n        this.orderDetails = data;\n        this.orderDetails.forEach(item => {\n          let name = item.product.name.trim();\n          // Tìm dấu '/' trong tên sản phẩm\n          let firstSlashIndex = name.indexOf('/');\n          // Nếu tìm thấy dấu '/' trong tên sản phẩm\n          if (firstSlashIndex !== -1) {\n            // Lấy phần trước dấu '/'\n            let normalPart = name.substring(0, firstSlashIndex).trim();\n            // Tìm dấu cách cuối cùng trong phần normalPart\n            const lastSpaceIndex = normalPart.lastIndexOf(' ');\n            // Cập nhật lại phần normalPart sau khi tìm dấu cách cuối cùng\n            normalPart = name.substring(0, lastSpaceIndex).trim();\n            // Phần styledPart là phần còn lại sau dấu cách cuối cùng\n            let styledPart = name.substring(lastSpaceIndex).trim();\n            // Cập nhật lại tên sản phẩm\n            item.product.name = normalPart;\n            item.product.styledPart = styledPart;\n          } else {\n            // Nếu không có dấu '/', chỉ có một phần normalPart\n            item.product.name = name;\n            item.product.styledPart = '';\n          }\n        });\n      }, error => {\n        this.toastr.error('Lỗi server', 'Hệ thống');\n      });\n    }\n    open(content) {\n      this.modalService.open(content, {\n        centered: true,\n        size: 'lg'\n      });\n    }\n    finish() {\n      this.ngOnInit();\n    }\n  }\n  OrderDetailComponent.ɵfac = function OrderDetailComponent_Factory(t) {\n    return new (t || OrderDetailComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.ToastrService));\n  };\n  OrderDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderDetailComponent,\n    selectors: [[\"app-order-detail\"]],\n    inputs: {\n      id: \"id\"\n    },\n    decls: 4,\n    vars: 0,\n    consts: [[\"content\", \"\"], [\"title\", \"Chi ti\\u1EBFt \\u0111\\u01A1n h\\u00E0ng\", \"onMouseOver\", \"this.style.color='white', this.style.backgroundColor='#19cda9'\", \"onMouseOut\", \"this.style.color='#19cda9', this.style.backgroundColor='white'\", 2, \"cursor\", \"pointer\", \"width\", \"35px\", \"height\", \"35px\", \"font-size\", \"16px\", \"line-height\", \"35px\", \"text-align\", \"center\", \"border-radius\", \"5px\", \"margin\", \"3px\", \"color\", \"var(--brandcolor)\", \"background\", \"var(--whitecolor)\", \"text-shadow\", \"var(--tshadow)\", 3, \"click\"], [1, \"icon-eye\"], [1, \"modal-header\"], [1, \"modal-title\"], [1, \"float-right\"], [1, \"modal-body\"], [1, \"table-responsive\"], [1, \"table\"], [2, \"background-color\", \"#19cda9\", \"color\", \"white\"], [1, \"text-center\"], [1, \"text-center\", 2, \"width\", \"10%\"], [\"class\", \"text-center\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"alt\", \"H\\u00ECnh \\u1EA3nh s\\u1EA3n ph\\u1EA9m\", \"width\", \"47px\", 2, \"cursor\", \"pointer\", 3, \"src\", \"routerLink\"], [\"title\", \"\\u0110\\u00E1nh gi\\u00E1\", 2, \"cursor\", \"pointer\", \"color\", \"#fcb800\", 3, \"orderDetail\", \"editFinish\"]],\n    template: function OrderDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r12 = i0.ɵɵgetCurrentView();\n        i0.ɵɵtemplate(0, OrderDetailComponent_ng_template_0_Template, 22, 5, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementStart(2, \"a\", 1);\n        i0.ɵɵlistener(\"click\", function OrderDetailComponent_Template_a_click_2_listener() {\n          i0.ɵɵrestoreView(_r12);\n          const _r0 = i0.ɵɵreference(1);\n          return ctx.open(_r0);\n        });\n        i0.ɵɵelement(3, \"i\", 2);\n        i0.ɵɵelementEnd();\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf, i5.RouterLink, i6.RateComponent],\n    pipes: [i7.CurrencyVietnamPipe],\n    styles: [\"\"]\n  });\n  return OrderDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}